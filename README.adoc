= Reactive Systems in Java

== Build Resilient, Event-Driven Architecture with https://quarkus.io/[Quarkus] and https://camel.apache.org/[Apache Camel]

== Links

- https://github.com/cescoffier/reactive-systems-in-java[Official Git Book Page]
- https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.13/index.html[SmallRye Reactive Messaging]

== PS Command RSS

[source,bash]
----
ps -e | grep thorntail
ps -o pid,rss,command -p {{id}} | awk '{$2=int($2/1024)"M";}{print;}'
java -Xmx48m -XX:MinHeapFreeRatio=10 -XX:MaxHeapFreeRatio=20 -jar {{jar}}
./mvnw clean package -Dquarkus.kubernetes.deploy=true
----

== Use wrk tool to stress the app endpoint

[source,bash]
----
wrk -t 10 -c50 -d40s http://localhost:8080/hello
----

* Container density is a key characteristic of cloud deployments with Kubernetes

* The Reactive Manifesto

** _Responsive_ Able to handle requests in a timely fashion
** _Resilient_ Able to manage failure gracefully
** _Elastic_ Able to scale up and down according to the load and resources
** _Message Driven_ Using asynchronous message-based communication among the components forming the system, async messages ensures loose coupling, isolation and location transparency

[source,java]
----
class FooMulti {

public Multi<Product> getRecommendations() {

  return Multi.createFrom().ticks().every(Duration.ofSeconds(1))
    .onOverflow().drop()
    .onItem().transformToUniAndConcatenate(x-> product.getRecommendedProduct());
}
};
----